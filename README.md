# Top Trumps

#### About the Project

Two player Top Trumps game running on websockets.
Although both the websocket server and the client are run on the hosting server all client related code and modules are within the app folder including the Flask application. All communication between the the websocket-client and websocket-server is via an API, the construct of the API messages is laid out below.

#### Requirements

See Rquirements.txt but essentually pip install websockets and flask.

### Messages

All message between the server and the client should be json in the form beolw.

{"type": "type value", "value": "value value"}

e.g.

{"type": "card", "value": "{"name":"jack", "attr": {"attr1": 5, "attr2": 10}}"}

### Server to Client Messages

Types Include:

connect - assign player name, either player1 or player2

info - generic info e.g. "you have joined the game" or "Player1 to take a turn"

hand - dictionary of all cards in players hand

card - dictionary of players current card

chat - broadcasts chats bewtween the websocket clients

redirect - supplies a url to redirect the websocket to on disconnect.
  
### Client to Server Messages

Types Include:

init - needs to be included in intitial message to server to initialilase player in the game

move - to indicate when player makes a move, the value of the this type should be an attribute e.g. "attractivness"

chat - chat message generated by the client to be broadcast.

### Running

Create and install requirments to vitrual environment, run vertual envronment. Run the app within the app dir, using "flask run". Start the websocket server with the top_trumps_server dir with "python3 websocket_server.py".

Open http:\\127.0.0.1\login

There is a guest account set up for the login:
    
    Username: Guest  
    Pin: 9999

To add additional users, open a terminal within the app folder:

    >>> sqlite3 auth_users.db

    >>> INSERT INTO users("username", "pin") VALUES("required_username", "required_pin");
